---
page_title: "unifi_firewall_policy Resource - unifi"
subcategory: ""
description: |-
  Manages a UniFi firewall policy (v2 zone-based firewall).
---

# unifi_firewall_policy (Resource)

Manages a UniFi firewall policy (v2 zone-based firewall).

~> **Note:** This resource requires UDM devices with Network 10.x+ that support zone-based firewall. For legacy controllers, use `unifi_firewall_rule` instead.

## Example Usage

```terraform
# Create firewall zones
resource "unifi_firewall_zone" "iot" {
  name = "IoT Zone"
}

resource "unifi_firewall_zone" "servers" {
  name = "Server Zone"
}

# Block IoT zone from accessing Server zone
resource "unifi_firewall_policy" "block_iot_to_servers" {
  name    = "Block IoT to Servers"
  enabled = true
  action  = "BLOCK"
  index   = 1000

  source {
    zone_id = unifi_firewall_zone.iot.id
  }

  destination {
    zone_id = unifi_firewall_zone.servers.id
  }

  logging = true
}

# Allow HTTPS traffic from any zone
resource "unifi_firewall_policy" "allow_https" {
  name      = "Allow HTTPS"
  enabled   = true
  action    = "ALLOW"
  protocol  = "tcp"
  index     = 1001

  destination {
    port = "443"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (String) The action to take. Valid values: 'ALLOW', 'BLOCK', 'REJECT'.
- `index` (Number) The index/priority of the policy (lower numbers are evaluated first).
- `name` (String) The name of the firewall policy.

### Optional

- `connection_state_type` (String) Connection state matching type. Valid values: 'ALL', 'RESPOND_ONLY', 'CUSTOM'. Defaults to 'ALL'.
- `connection_states` (Set of String) Set of connection states to match (when connection_state_type is 'CUSTOM').
- `destination` (Attributes) Destination matching criteria. (see [below for nested schema](#nestedatt--destination))
- `enabled` (Boolean) Whether the policy is enabled. Defaults to true.
- `icmp_typename` (String) ICMP type name (for ICMP protocol).
- `icmpv6_typename` (String) ICMPv6 type name (for ICMPv6 protocol).
- `ip_version` (String) The IP version to match. Valid values: 'BOTH', 'IPV4', 'IPV6'. Defaults to 'BOTH'.
- `logging` (Boolean) Whether to log matching packets. Defaults to false.
- `match_ipsec` (Boolean) Whether to match IPSec traffic. Defaults to false.
- `protocol` (String) The protocol to match. Valid values: 'all', 'tcp_udp', 'tcp', 'udp', 'icmp', 'icmpv6'. Defaults to 'all'.
- `schedule` (Attributes) Schedule configuration for when the policy is active. (see [below for nested schema](#nestedatt--schedule))
- `source` (Attributes) Source matching criteria. (see [below for nested schema](#nestedatt--source))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The unique identifier of the firewall policy.

<a id="nestedatt--destination"></a>
### Nested Schema for `destination`

Optional:

- `client_macs` (Set of String) Set of client MAC addresses to match.
- `ips` (Set of String) Set of IP addresses or CIDR ranges to match.
- `mac` (String) MAC address to match.
- `matching_target` (String) Matching target type. Valid values: 'ANY', 'IP', 'NETWORK', 'DOMAIN', 'REGION', 'PORT_GROUP', 'ADDRESS_GROUP'.
- `network_id` (String) Network ID to match.
- `port` (String) Port or port range to match.
- `zone_id` (String) The destination zone ID.


<a id="nestedatt--schedule"></a>
### Nested Schema for `schedule`

Optional:

- `days_of_week` (Set of String) Days of the week. Valid values: 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY'.
- `mode` (String) Schedule mode. Valid values: 'ALWAYS', 'CUSTOM'.
- `time_range_end` (String) End time in HH:MM format.
- `time_range_start` (String) Start time in HH:MM format.


<a id="nestedatt--source"></a>
### Nested Schema for `source`

Optional:

- `client_macs` (Set of String) Set of client MAC addresses to match.
- `ips` (Set of String) Set of IP addresses or CIDR ranges to match.
- `mac` (String) MAC address to match.
- `matching_target` (String) Matching target type. Valid values: 'ANY', 'IP', 'NETWORK', 'DOMAIN', 'REGION', 'PORT_GROUP', 'ADDRESS_GROUP'.
- `network_id` (String) Network ID to match.
- `port` (String) Port or port range to match.
- `zone_id` (String) The source zone ID.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Firewall policies can be imported using their ID:

```shell
terraform import unifi_firewall_policy.example 60a1b2c3d4e5f67890123456
```
