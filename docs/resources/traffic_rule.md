---
page_title: "unifi_traffic_rule Resource - unifi"
subcategory: ""
description: |-
  Manages a UniFi traffic rule for QoS and traffic management.
---

# unifi_traffic_rule (Resource)

Manages a UniFi traffic rule for QoS and traffic management.

## Example Usage

```terraform
# Block specific domains
resource "unifi_traffic_rule" "block_social" {
  name            = "Block-Social-Media"
  action          = "BLOCK"
  matching_target = "DOMAIN"

  domains {
    domain      = "*.facebook.com"
    description = "Facebook"
  }

  domains {
    domain      = "*.twitter.com"
    description = "Twitter"
  }

  domains {
    domain = "*.tiktok.com"
  }
}

# Block during work hours with schedule
resource "unifi_traffic_rule" "work_hours_block" {
  name            = "Block-Gaming-Work-Hours"
  action          = "BLOCK"
  matching_target = "APP"
  app_category_ids = ["gaming"]

  schedule {
    mode             = "CUSTOM"
    time_range_start = "09:00"
    time_range_end   = "17:00"
    days_of_week     = ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"]
  }
}

# Bandwidth limit for streaming
resource "unifi_traffic_rule" "limit_streaming" {
  name            = "Limit-Streaming"
  action          = "ALLOW"
  matching_target = "APP"
  app_category_ids = ["streaming_media"]

  bandwidth_limit {
    download_limit_kbps = 25000
    upload_limit_kbps   = 5000
    enabled             = true
  }
}

# Block specific IP ranges
resource "unifi_traffic_rule" "block_ips" {
  name            = "Block-Suspicious-IPs"
  action          = "BLOCK"
  matching_target = "IP"
  ip_addresses    = ["192.168.100.0/24", "10.10.10.0/24"]
}

# Allow specific regions
resource "unifi_traffic_rule" "allow_regions" {
  name            = "Allow-US-Only"
  action          = "ALLOW"
  matching_target = "REGION"
  regions         = ["US", "CA"]
}

# Disabled rule (for maintenance)
resource "unifi_traffic_rule" "disabled" {
  name        = "Maintenance-Rule"
  action      = "BLOCK"
  enabled     = false
  description = "Disabled for maintenance"
}

# Target specific devices
resource "unifi_traffic_rule" "device_specific" {
  name   = "Kids-Device-Block"
  action = "BLOCK"

  target_devices {
    type       = "CLIENT"
    client_mac = "aa:bb:cc:dd:ee:ff"
  }

  target_devices {
    type       = "NETWORK"
    network_id = unifi_network.kids.id
  }

  matching_target = "INTERNET"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (String) The action for the rule. Valid values: BLOCK, ALLOW.
- `name` (String) The name of the traffic rule.

### Optional

- `app_category_ids` (Set of String) Set of application category IDs for app-based filtering.
- `app_ids` (Set of Number) Set of application IDs for app-based filtering.
- `bandwidth_limit` (Attributes) Bandwidth limit configuration. (see [below for nested schema](#nestedatt--bandwidth_limit))
- `description` (String) A description for the traffic rule.
- `domains` (Attributes List) List of domains for domain-based filtering. (see [below for nested schema](#nestedatt--domains))
- `enabled` (Boolean) Whether the traffic rule is enabled. Defaults to true.
- `ip_addresses` (Set of String) Set of IP addresses or CIDR blocks for IP-based filtering.
- `ip_ranges` (Set of String) Set of IP ranges for IP-based filtering.
- `matching_target` (String) The matching target type. Valid values: INTERNET, IP, DOMAIN, REGION, APP.
- `network_id` (String) The network ID to apply the rule to.
- `regions` (Set of String) Set of geographic regions for region-based filtering.
- `schedule` (Attributes) Schedule for when the rule is active. (see [below for nested schema](#nestedatt--schedule))
- `target_devices` (Attributes List) List of target devices for the rule. (see [below for nested schema](#nestedatt--target_devices))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The unique identifier of the traffic rule.

<a id="nestedatt--bandwidth_limit"></a>
### Nested Schema for `bandwidth_limit`

Optional:

- `download_limit_kbps` (Number) Download speed limit in Kbps.
- `enabled` (Boolean) Whether bandwidth limiting is enabled.
- `upload_limit_kbps` (Number) Upload speed limit in Kbps.


<a id="nestedatt--domains"></a>
### Nested Schema for `domains`

Required:

- `domain` (String) The domain name or pattern.

Optional:

- `description` (String) A description for the domain entry.
- `ports` (Set of Number) Set of ports associated with the domain.


<a id="nestedatt--schedule"></a>
### Nested Schema for `schedule`

Optional:

- `days_of_week` (Set of String) Days of week when the rule is active. Valid values: MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY.
- `mode` (String) Schedule mode. Valid values: ALWAYS, CUSTOM.
- `time_range_end` (String) End time in HH:MM format.
- `time_range_start` (String) Start time in HH:MM format.


<a id="nestedatt--target_devices"></a>
### Nested Schema for `target_devices`

Optional:

- `client_mac` (String) The MAC address of the client device.
- `network_id` (String) The network ID for network-based targeting.
- `type` (String) The target type (e.g., ALL_CLIENTS, CLIENT, NETWORK).


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Traffic rules can be imported using their ID:

```shell
terraform import unifi_traffic_rule.example 60a1b2c3d4e5f67890123456
```
